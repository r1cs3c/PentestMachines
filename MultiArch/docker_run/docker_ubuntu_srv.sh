#!/bin/bash
# Run Ubuntu SSH and OpenVPN enabled
machine_name="ubuntu_srv"
ram_mem="1G"
image="ubuntu:ric"
dir_to_share="$(PWD)"

#Docker without VPN support
docker run -d --rm --name $machine_name -h "ubuntu.dev" --memory $ram_mem --cap-add=NET_ADMIN --device /dev/net/tun -p 2222:22 -ti $image /bin/bash


# install ssh
docker exec -ti $machine_name bash -c "apt update && apt upgrade -yy"
docker exec -ti $machine_name bash -c "apt install -yy vim openvpn"
docker exec -ti $machine_name bash -c "apt install -yy ssh"
docker exec -ti $machine_name bash -c "service ssh start"
docker exec -ti $machine_name bash -c "passwd"
docker exec -ti $machine_name bash -c "adduser m4ur1c3"
